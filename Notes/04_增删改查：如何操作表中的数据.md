# 增删改查：如何操作表中的数据

# 添加数据

- 语法
    
    ```sql
    INSERT INTO 表名 [(字段名 [,字段名] ...)] VALUES (值的列表);
    ```
    

## 插入数据记录

- 插入数据的时候要注意：是否允许为空、主键
    - 可以为空：不指定会自动赋空值
    - 主键：需要指定数据
    - 不能为空：需要指定数据

```sql
INSERT INTO demo.goodsmaster (itemnumber, barcode, goodsname, specification, unit, price)
VALUES (4, '0003', '尺子', '三角形', '把', 5);
```

## 插入查询结果

- 语法
    
    ```sql
    INSERT INTO 表名 （字段名）
    SELECT 字段名或值
    FROM 表名
    WHERE 条件
    ```
    

## 修改表结构

- 如果 specification 中有 NULL 的记录，需要先删除再修改结构

```sql
ALTER TABLE demo.goodsmaster
MODIFY specification TEXT NOT NULL;
```

# 删除数据

- 语法
    
    ```sql
    # 删除全部数据
    DELETE FROM 表名
    
    # 删除指定数据
    DELETE FROM 表名
    WHERE 条件
    ```
    

# 更新数据

- 语法
    
    ```sql
    UPDATE 表名
    SET 字段名=值
    WHERE 条件
    ```
    
- 不要修改主键字段的值（数据完整性、冲突、索引问题【重新构建】）

# 查询数据

- 语法
    
    ```sql
    SELECT *|字段列表
    FROM 数据源
    WHERE 条件
    GROUP BY 字段
    HAVING 条件
    ORDER BY 字段
    LIMIT 起始点，行数
    ```
    
- `SELECT`：查询关键字
- `WHERE`：查询条件
- `GROUP BY`：查询结果如何分组，经常与聚合函数一起使用
- `HAVING`：用于筛选查询结果，跟 WHERE 类似
- `FROM`：表示查询的数据源（表、一个查询结果[**派生表/子查询**]）
    
    ![https://i.imgur.com/QRya9oa.png](https://i.imgur.com/QRya9oa.png)
    
- ORDER BY：查询结果如何排序
    - ASC：升序
    - DESC：降序
    
    ```sql
    SELECT *
    FROM demo.goodsmaster
    ORDER BY barcode ASC, price DESC;
    ```
    
- LIMIT：只显示部分查询结果
    - `LIMIT n, m`，表示从第 n 条记录开始，获得 m 条
    
    ![https://i.imgur.com/F6HszGm.png](https://i.imgur.com/F6HszGm.png)
    

# 总结

```sql
INSERT INTO 表名 [(字段名 [,字段名] ...)] VALUES (值的列表);
 
INSERT INTO 表名 （字段名）
SELECT 字段名或值
FROM 表名
WHERE 条件
 
DELETE FROM 表名
WHERE 条件
 
UPDATE 表名
SET 字段名=值
WHERE 条件

SELECT *|字段列表
FROM 数据源
WHERE 条件
GROUP BY 字段
HAVING 条件
ORDER BY 字段
LIMIT 起始点，行数
```

如果我们把查询的结果插入到表中时，导致主键约束或者唯一性约束被破坏了，就可以用“**ON DUPLICATE**”关键字进行处理。这个关键字的作用是，告诉 MySQL，如果**遇到重复的数据，该如何处理**