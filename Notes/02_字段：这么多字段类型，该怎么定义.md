# 字段：这么多字段类型，该怎么定义

# 整数类型

![https://static001.geekbang.org/resource/image/dd/68/dd11099e29ae339f605a222b5b194368.jpg?wh=3938*1995](https://static001.geekbang.org/resource/image/dd/68/dd11099e29ae339f605a222b5b194368.jpg?wh=3938*1995)

**需要考虑存储空间和可靠性的平衡问题， 首先需要保证数据不会超过取值范围（系统故障损失大）**

# 浮点数类型和定点数类型

## 浮点数类型

- 将十进制转换为二进制存储

![https://static001.geekbang.org/resource/image/13/64/13d20b6f3a8a8d7ed4274d9b7a251c64.jpg?wh=3898*1307](https://static001.geekbang.org/resource/image/13/64/13d20b6f3a8a8d7ed4274d9b7a251c64.jpg?wh=3898*1307)

- FLOAT 单精度浮点数
- DOUBLE 双精度浮点数
- REAL 默认就是 DOUBLE
    - 启用“REAL_AS_FLOAT”
        
        ```bash
        SET sql_mode = “REAL_AS_FLOAT”;
        ```
        

**浮点数类型的缺陷：不精确，对精度要求高的项目不要使用浮点数**

## 定点数类型（精确）

- DECIMAL
- 把十进制数的整数部分和小数部分拆开，分别转换成十六进制数，进行存储
- DECIMAL（M,D）的方式表示高精度小数。其中，M 表示整数部分加小数部分，一共有多少位，M<=65。D 表示小数部分位数，D<M

# 文本类型

- CHAR(M)：固定长度字符串。CHAR(M) 类型必须预先定义字符串长度。如果太短，数据可能会超出范围；如果太长，又浪费存储空间
- VARCHAR(M)： 可变长度字符串。VARCHAR(M) 也需要预先知道字符串的最大长度，不过只要不超过这个最大长度，具体存储的时候，是按照实际字符串长度存储的
- TEXT：字符串。系统自动按照实际长度存储，不需要预先定义长度
    - TINYTEXT：255 字符（这里假设字符是 ASCII 码，一个字符占用一个字节，下同）
    - TEXT： 65535 字符
    - MEDIUMTEXT：16777215 字符
    - LONGTEXT： 4294967295 字符（相当于 4GB）
- ENUM： 枚举类型，取值必须是预先设定的一组字符串值范围之内的一个，必须要知道字符串所有可能的取值
- SET：是一个字符串对象，取值必须是在预先设定的字符串值范围之内的 0 个或多个，也必须知道字符串所有可能的取值

对于 `ENUM 类型`和 `SET 类型`来说，你必须知道所有可能的取值，所以只能用在某些特定场合，比如某个参数设定的取值范围只有几个固定值的场景

**问题：由于实际存储的长度不确定，MySQL 不允许 TEXT 类型的字段做主键。遇到这种情况，你只能采用 CHAR(M)，或者 VARCHAR(M)**

- 业务中很少使用 TEXT 类型

# 日期和时间类型

![https://static001.geekbang.org/resource/image/5d/d5/5dde7b30c14147bd88eacff77e5892d5.jpg?wh=3869*1811](https://static001.geekbang.org/resource/image/5d/d5/5dde7b30c14147bd88eacff77e5892d5.jpg?wh=3869*1811)

- **建议在实际项目中，尽量用 DATETIME 类型**
- TIME 类型表示的是时间间隔，而不是 24 小时制

# 小技巧

在定义数据类型时，如果确定是整数，就用 INT；如果是小数，一定用定点数类型 DECIMAL；如果是字符串，只要不是主键，就用 TEXT；如果是日期与时间，就用 DATETIME

- 整数：INT
- 小数：DECIMAL
- 字符串：TEXT
- 日期与时间：DATETIME

好处：首先确保系统不会因为数据类型定义出错